!function(a){function b(){if(c)return c;c=this;var b=a.extend({},d);this.setup=function(c){b=a.extend({},d,c)},this.load=function(c,d){d="object"==typeof c?c:d,d=a.extend({},b,d),c=d&&d.url||c;var e=a.Deferred(),f=(d.cookie,new Date((new Date).getTime()+3e5));document.cookie=d.cookie+"=1;path=/;expires="+f.toGMTString();var g=document.createElement("iframe");g.setAttribute("id","appcacheloader"),document.body.appendChild(g),g.setAttribute("style","width:0px; height:0px; visibility:hidden; position:absolute; border:none");g.src=c,g.onload=function(){console.info("Appcache-loader")};var h=!1;return a(window).on("message",function(b){if(b=b.originalEvent,b.data&&b.data.type&&"appcache:event"===b.data.type){var c=b.data.status;if(console.info("Appcache-loader response",c),"cached"===c||"uncached"===c||"idle"===c||"obsolete"===c||"timeout"===c||"updateready"===c||"noupdate"===c||"error"===c){h=!0;var g=document.getElementById("appcacheloader");g.parentNode.removeChild(g);f=new Date((new Date).getTime()-3e5),document.cookie=d.cookie+"=;path=/;expires="+f.toGMTString(),a(window).off("message",arguments.callee),e.resolve(c)}else e.notify(c)}}),e.promise()}}var c=null,d={url:(a("base").attr("href")||".")+"/appcache.html",cookie:"appcache"};a.extend({appcache:new b})}(jQuery);